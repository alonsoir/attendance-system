setup:
  addons:
    - plan: heroku-postgresql:hobby-dev
    - plan: heroku-redis:hobby-dev

build:
  docker:
    web: Dockerfile
    worker: Dockerfile

release:
  command:
    - alembic upgrade head
  image: web

run:
  web: uvicorn attendance_system.main:app --host 0.0.0.0 --port $PORT
  worker: celery -A attendance_system.worker worker --loglevel=info